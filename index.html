<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cillivation and countries v0.0.1a</title>
    <style>
        canvas {
            border: 2px solid black;
            background: lightgray;
        }
    </style>
</head>
<body>
    <canvas id="gameCanvas"></canvas>

    <script>
        const canvas = document.getElementById("gameCanvas");
        const ctx = canvas.getContext("2d");

        // K√≠ch th∆∞·ªõc canvas
        canvas.width = 800;
        canvas.height = 600;

        // ·∫¢nh nh√¢n v·∫≠t
        const images = {
            default: "MyPic.png",
            left: "MyPic2.png",
            right: "MyPic3.png"
        };

        let currentImage = new Image();
        currentImage.src = images.default;

        // V·ªã tr√≠ & v·∫≠n t·ªëc
        let x = 350, y = 250;
        let vx = 0, vy = 0;
        let ax = 0, ay = 0;
        const acceleration = 0.0033;  // üîΩ Gi·∫£m gia t·ªëc th√™m 10 l·∫ßn
        const friction = 0.9;        // üõ† Gi·ªØ ma s√°t ƒë·ªÉ m∆∞·ª£t m√†
        const maxSpeed = 0.133;      // üîΩ Gi·∫£m t·ªëc ƒë·ªô t·ªëi ƒëa th√™m 10 l·∫ßn

        const keys = {}; // L∆∞u tr·∫°ng th√°i ph√≠m

        // Khi ·∫£nh t·∫£i xong, b·∫Øt ƒë·∫ßu game
        currentImage.onload = function () {
            requestAnimationFrame(update);
        };

        function update() {
            ax = 0;
            ay = 0;

            // X·ª≠ l√Ω h∆∞·ªõng ƒëi
            if (keys["ArrowUp"] || keys["w"]) ay -= acceleration;
            if (keys["ArrowDown"] || keys["s"]) ay += acceleration;
            if (keys["ArrowLeft"] || keys["a"]) {
                ax -= acceleration;
                currentImage.src = images.left;
            }
            if (keys["ArrowRight"] || keys["d"]) {
                ax += acceleration;
                currentImage.src = images.right;
            }

            // N·∫øu kh√¥ng nh·∫•n ph√≠m tr√°i/ph·∫£i, quay v·ªÅ ·∫£nh m·∫∑c ƒë·ªãnh
            if (!keys["ArrowLeft"] && !keys["a"] && !keys["ArrowRight"] && !keys["d"]) {
                currentImage.src = images.default;
            }

            // C·∫≠p nh·∫≠t v·∫≠n t·ªëc (th√™m ma s√°t)
            vx += ax;
            vy += ay;
            vx *= friction;
            vy *= friction;

            // Gi·ªõi h·∫°n t·ªëc ƒë·ªô t·ªëi ƒëa
            if (Math.abs(vx) < 0.001) vx = 0;
            if (Math.abs(vy) < 0.001) vy = 0;
            vx = Math.max(-maxSpeed, Math.min(maxSpeed, vx));
            vy = Math.max(-maxSpeed, Math.min(maxSpeed, vy));

            // C·∫≠p nh·∫≠t v·ªã tr√≠
            x += vx;
            y += vy;

            // Gi·ªØ nh√¢n v·∫≠t trong m√†n h√¨nh
            x = Math.max(0, Math.min(canvas.width - 100, x));
            y = Math.max(0, Math.min(canvas.height - 100, y));

            // V·∫Ω l·∫°i canvas
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            ctx.drawImage(currentImage, x, y, 100, 100);

            // L·∫∑p l·∫°i update
            requestAnimationFrame(update);
        }

        // L·∫Øng nghe s·ª± ki·ªán ph√≠m
        window.addEventListener("keydown", (event) => {
            keys[event.key] = true;
        });

        window.addEventListener("keyup", (event) => {
            keys[event.key] = false;
        });
    </script>
</body>
</html>
